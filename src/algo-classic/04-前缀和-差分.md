### 前缀和
**07/20/2023**

#### 核心思想
> - 解决的问题，一般是求一个区间的和/子数组的和，暴力是$`O(n^2)`$，前缀和是$`O(n)`$。
> - 前缀和数组: $`sum[i] = \sum_{j=0}^{i-1} nums[j]`$
> - 对于任意一个区间$`[l, r]`$，$`sum[r] - sum[l-1] = \sum_{j=l-1}^{r} nums[j]`$，即区间和。

#### 代码模板
> - 为了便于处理边界，下标从1开始。
```python
def prefixSum(nums):
    n = len(nums)
    sum = [0] * (n + 1)
    for i in range(1, n + 1):
        sum[i] = sum[i - 1] + nums[i - 1]
    return sum 
```


#### 相关问题


### 差分

#### 核心思想
> - 解决的问题是，对于一个区间$`[l, r]`$，给区间内的每个元素加上一个值$`c`$，暴力是$`O(n^2)`$，差分是$`O(n)`$。
> - 差分数组: $`diff[i] = nums[i] - nums[i-1]`$
> - 打标记，区间开始的时候加上$`c`$，区间结束的时候减去$`c`$，区间外的元素不变。

#### 代码模板
> - 为了便于处理边界，下标从1开始。
```python
```

#### 相关问题
[Q]

[Q2772] Apply Operations to Make Array Elements Equal to Zero 
> - 每个子数组加上一个值，使得数组中所有元素都变成0，求最少的操作次数。暴力是$`O(n^2)`$，差分是$`O(n)`$。
> - 模拟操作。
> - 时间复杂度: $`O(n)`$，其中n为数组长度。
> - 空间复杂度: $`O(n)`$。


```python
class Solution:
    def checkArray(self, nums: List[int], k: int) -> bool:
        n = len(nums)
        d = [0] * (n + 1) # 差分数组,n+1为着处理最后一个差分
        sum_d = 0 
        for i, x in enumerate(nums):
            sum_d += d[i]
            x += sum_d 
            # x < 0:
            if x < 0:
                return False
            # x = 0
            if x == 0:
                continue 
            # x > 0
            if i+k > n: # 无法操作
                return False
            sum_d -= x # d[i] -= x 
            d[i+k] += x
        return True
```


[//]: #
  [Q792]: <https://leetcode.com/problems/number-of-matching-subsequences/>
  [Q2772]: <https://leetcode.com/problems/apply-operations-to-make-all-array-elements-equal-to-zero/>