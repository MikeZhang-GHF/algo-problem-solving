### 贡献法

**07/02/2023**

#### 核心思想


#### 代码模板
> - 根据题意，枚举每个数对于答案的贡献。通常是每个数最为最小值/最大值，对于答案的贡献。
> - 每个数作为最值，如果找的是子数组，就要找到左右的边界。如果是子序列问题，考虑选/不选。
> - 对于重复数字的处理。通常使用的方式，规定第一个出现的数字，如左边第一个数字。可以答案贡献。


#### 相关问题

[Q2681] 英雄的力量
> 根据定义，一组力量的最大，最小。跟顺序无关，可以考虑排序，**有序**是一个非常好的性质。
> 枚举，枚举最小值和最大值。此问题是子序列问题，子序列问题就是选/不选。枚举这样的子序列对于答案的贡献。
> 比如[1,2,3,4,5], 最小值1, 最大值4,的子序列有4个,[2,3]中间可以选的元素。对于答案的贡献, 4^2x1x2^2
> 最小值2, 最大值4, 4^2x2x2^1, 最小值3,最大值4, 4^2x3x2^0, 最大值是4对于答案的贡献, 4^2x(1x2^2+2x2^1+3x2^0), s=(1x2^2+2x2^1+3x2^0)
> **增量法**, 枚举最大值是5, 5x(1x2^3+2x2^2+3x2^1+4x2^0)=5x(sx2+4x2^0)
> 枚举每个数作为最大值的贡献为 x^3 + x^2xs = x^2(x+s), s(next)= 2xs+x
> 细节, 注意取模

```python
class Solution:
    def sumOfPower(self, nums: List[int]) -> int:
        nums.sort()
        MOD = 10**9 + 7
        ans = s = 0
        for x in nums:
            ans = (ans + x * x * (x + s)) % MOD 
            s = (2 * s + x) % MOD 
        return ans 
```

[Q2763]

[//]: # 

   [Q2681]: <https://leetcode.cn/problems/power-of-heroes/>
   
   [Q2763]: <https://leetcode.cn/problems/sum-of-imbalance-numbers-of-all-subarrays/>

   [Q2281]: <https://leetcode.cn/problems/sum-of-total-strength-of-wizards/description/>